<!DOCTYPE html>
<html>
<head>
  <title>Double Click Test</title>
</head>
<body>
  <div id="app"></div>
  <script type="module">
    import { signal, effect } from './packages/zen-signal/dist/index.js';

    console.log('=== Starting Test ===');

    const count = signal(0);
    const display = document.createElement('div');
    display.style.cssText = 'font-size: 24px; margin: 20px;';

    // Set up effect similar to jsx-runtime
    console.log('Setting up effect...');
    effect(() => {
      console.log('Effect running, reading count.value...');
      const value = count.value;
      console.log('Count value:', value);
      display.textContent = `Count: ${value}`;
      console.log('Updated display to:', display.textContent);
      return undefined;
    });

    const button = document.createElement('button');
    button.textContent = 'Increment';
    button.style.cssText = 'font-size: 18px; padding: 10px 20px;';
    button.onclick = () => {
      console.log('=== Button clicked ===');
      console.log('Before: count.value =', count.value);
      count.value++;
      console.log('After: count.value =', count.value);
      console.log('Display shows:', display.textContent);
      console.log('');
    };

    document.getElementById('app').appendChild(display);
    document.getElementById('app').appendChild(button);

    console.log('Initial display:', display.textContent);
    console.log('=== Test Ready ===\n');
  </script>
</body>
</html>
